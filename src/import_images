#!/bin/bash

# doc import_images {
#
# DESCRIPTION
#   import_images - Imports files output from cueripper. Expects cueripper to output using
#   the following format:  %artist% - %album%\if(%unique%,%unique%,0), so that every album
#   is outputted in its own folder, first disc image is labeled 0.<ext>, and second disc image
#   is labeled 1.<ext>, and the cover is named folder.jpg
#
# USAGE
#   import_images </path/to/import/dir> </path/to/img> </path/to/cue> [<options>]
#
# OPTIONS
#   -a </path/to/accurip/log
#   -l </path/to/eac/log
#   -c </path/to/cover/img
#
# DEPENDENCIES src/print_meta_mtag src/add_bom src/fix_apos src/gen_cover src/file_name src/cueparser
#
# }


import_images() {
    local TRACK_DIR="${1}"
    local IMG="${2}"
    local CUE="${3}"; shift 3
    while true; do
        case ${1} in
            (-a) local ACCURIP="${2}"; shift 2;;
            (-c) local COVER="${2}"; shift 2;;
            (-l) local LOG="${2}"; shift 2;;
            (*) break ;;
        esac
    done

    local pathList=(${IMG}	${CUE}	${ACCURIP}	${COVER}	${LOG})
    for path in ${pathList[@]}; do
        [[ -f ${path} ]] || return 1
    done

    for path in ${pathList[@]}; do
        cp "${path}" "$(sed 's|.*/.||' <<< ${TRACK_DIR})"
    done
}

